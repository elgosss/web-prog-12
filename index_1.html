<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Задание 1</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
        <style>
        </style>
    </head>
    <body>
        <div>
            <h1 style="text-align: center; font-family: 'Arial', sans-serif; margin-top: 50px;">Схожесть дизайна эталона с дизайном пользователя: </h1>
        </div>
        <div id="standard">
        </div>
        <div id="user">
        </div>
        <script>
            "use strict";

            var listStandard = new XMLHttpRequest();
            listStandard.open("GET", "https://elgosss.github.io/web-prog-12/standard.html", false);
            listStandard.send();
            var htmlStandard = listStandard.responseText.split('<body>')[1].split('</body>')[0];

            $('#standard').html(htmlStandard);

            var listUser = new XMLHttpRequest();
            listUser.open("GET", "https://elgosss.github.io/web-prog-12/user.html", false);
            listUser.send();
            var htmlUser = listUser.responseText.split('<body>')[1].split('</body>')[0];

            $('#user').html(htmlUser);

            var jStandard = jQuery(listStandard.responseText);
            var arrayStandard = jStandard[5].innerText.split('}\n');
            for (let i = 0; i < arrayStandard.length - 1; i++) {
                if (arrayStandard[i].indexOf('body') >= 0) {
                    $('style').append('#standard' + arrayStandard[i].replace('body', '') + '}');
                } else {
                    $('style').append('#standard' + arrayStandard[i] + '}');
                }
            }

            var jUser = jQuery(listUser.responseText);
            var arrayUser = jUser[5].innerText.split('}\n');
            for (let i = 0; i < arrayUser.length - 1; i++) {
                if (arrayUser[i].indexOf('body') >= 0) {
                    $('style').append('#user' + arrayUser[i].replace('body', '') + '}');
                } else {
                    $('style').append('#user' + arrayUser[i] + '}');
                }
            }

            /*var h1Standard = $('#standard h1');
            if (h1Standard.is('#user h1')) {
                console.log('yes');
            }*/

            /*var h1List = document.getElementsByTagName('h1');
            console.log(h1List[1].isEqualNode(h1List[0]));
            if (h1List[0].isEqualNode(h1List[1]) === true) {
                console.log('yes');
            }*/

            var result = 0;
            var maxResult = 25;

            if ($('#standard h1').css('font-size') == $('#user h1').css('font-size')) {
                result += 1;
            }
            if ($('#standard h1').css('color') == $('#user h1').css('color')) {
                result += 1;
            }

            if ($('#standard').css('width') == $('#user').css('width')) {
                result += 1;
            }
            if ($('#standard').css('margin') == $('#user').css('margin')) {
                result += 1;
            }
            if ($('#standard').css('padding') == $('#user').css('padding')) {
                result += 1;
            }
            if ($('#standard').css('font-family') == $('#user').css('font-family')) {
                result += 1;
            }
            if ($('#standard').css('font-size') == $('#user').css('font-size')) {
                result += 1;
            }
            if ($('#standard').css('line-height') == $('#user').css('line-height')) {
                result += 1;
            }
            
            if ($('#standard p').css('width') == $('#user p').css('width')) {
                result += 1;
            }
            if ($('#standard p').css('padding') == $('#user p').css('padding')) {
                result += 1;
            }
            if ($('#standard p').css('color') == $('#user p').css('color')) {
                result += 1;
            }
            if ($('#standard p').css('border') == $('#user p').css('border')) {
                result += 1;
            }
            if ($('#standard p').css('margin-righ') == $('#user p').css('margin-righ')) {
                result += 1;
            }
            if ($('#standard p').css('vertical-align') == $('#user p').css('vertical-align')) {
                result += 1;
            }
            if ($('#standard p').css('border-radius') == $('#user p').css('border-radius')) {
                result += 1;
            }
            if ($('#standard p').css('background-color') == $('#user p').css('background-color')) {
                result += 1;
            }
            if ($('#standard p').css('color') == $('#user p').css('color')) {
                result += 1;
            }

            var arrayDivStandard = Array.from(document.getElementById('standard').getElementsByTagName('div')[0].children);
            var arrayDivUser = Array.from(document.getElementById('user').getElementsByTagName('div')[0].children);

            for (let i = 0; i < arrayDivStandard.length; i++) {
                if (i == 1) {
                    if (arrayDivStandard[i].getAttribute('width') == arrayDivUser[i].style.width.replace('px', '')) {
                        result += 1;
                    }
                    if (arrayDivStandard[i].getAttribute('height') == arrayDivUser[i].style.height.replace('px', '')) {
                        result += 1;
                    }
                } else {
                    if (arrayDivStandard[i].getAttribute('width') == arrayDivUser[i].getAttribute('width')) {
                        result += 1;
                    }
                    if (arrayDivStandard[i].getAttribute('height') == arrayDivUser[i].getAttribute('height')) {
                        result += 1;
                    }
                }
                
            }

            if ($('#standard .gallery').css('width') == $('#user .gallery').css('width')) {
                result += 1;
            }
            if ($('#standard .gallery').css('height') == $('#user .gallery').css('height')) {
                result += 1;
            }

            result = result * 100 / maxResult;
            
            $('#standard').css('display', 'none');
            $('#user').css('display', 'none');

            $('h1').append(result.toFixed(3) + '%');

            console.log(result.toFixed(3) + '%');

        </script>
    </body>
</html>